@using Coevery.UI.Navigation
@{
    MenuItem menu = Model.Item;
    int level = Model.Level;
    bool hasChildren = menu.Items.Any();
    string idClass = "menu-id-" + menu.IdHint;
    string levelClass = "menu-level-" + level;
    string menuText = menu.Text.Text;
}

<li @if (menu.Selected && !hasChildren) {<text>class="active"</text>}>
        @if (hasChildren) {
            <span>
                <span class="nav-title vertical-middle">@menuText</span>
                <i class="icos-eject @if (!menu.Selected) {<text>collapsed</text>}"
                   data-toggle="collapse" data-target=".@levelClass.@idClass"></i>
            </span>
        }
        else {
            <a href="@menu.Href" title="@menuText">
                <i class="@string.Join(" ", menu.Classes) vertical-middle"></i>
                <span class="nav-title vertical-middle">@menuText</span>
            </a>
        }
    @if (hasChildren) {
        <ul class="collapse @levelClass @idClass @if (menu.Selected) {<text>in</text>}">
            @foreach (var childMenu in menu.Items) {
                @Display.MenuItem(Item: childMenu, Level: level + 1)
            }
        </ul>
    }
</li>