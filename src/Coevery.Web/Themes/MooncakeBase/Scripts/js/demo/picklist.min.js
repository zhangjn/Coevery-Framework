(function(n,t,i,r){"use strict";var u=function(n,t){arguments.length&&this._init(n,t)},f=0;u.prototype={defaults:{mainClass:"pickList",listContainerClass:"pickList_listContainer",sourceListContainerClass:"pickList_sourceListContainer",controlsContainerClass:"pickList_controlsContainer",targetListContainerClass:"pickList_targetListContainer",listClass:"pickList_list",sourceListClass:"pickList_sourceList",targetListClass:"pickList_targetList",listItemClass:"pickList_listItem",selectedListItemClass:"pickList_selectedListItem",filterContainerClass:"pickList_filter",sourceFilterClass:"pickList_sourceFilter",targetFilterClass:"pickList_targetFilter",addAllClass:"pickList_addAll",addClass:"pickList_add",removeAllClass:"pickList_removeAll",removeClass:"pickList_remove",addAllLabel:"&gt;&gt",addLabel:"&gt;",removeAllLabel:"&lt;&lt;",removeLabel:"&lt;",sourceListLabel:"Available Options",targetListLabel:"Selected Options",listLabelClass:"pickList_listLabel",sourceListLabelClass:"pickList_sourceListLabel",targetListLabelClass:"pickList_targetListLabel",enableCounters:!0,enableFilters:!0,sortList:!0,guidPrefix:"pl"},_init:function(t,i){this.element=n(t),this.options=n.extend({},this.defaults,i,this.element.data()),this._itemDictionary={},this._buildPickList(),this._refresh()},_buildPickList:function(){var t=this;t.element.attr("multiple")||t.element.attr("multiple",!0).html(t.element.html()),t._pickList=n("<div><\/div>").addClass(t.options.mainClass).append(t._buildList("source")).append(t._buildControls()).append(t._buildList("target")),t._populateLists(),t._pickList.insertBefore(t.element.hide())},_buildList:function(t){var i=this,r=n("<div><\/div>").addClass(i.options.listContainerClass).addClass(i.options[t+"ListContainerClass"]),u;return i[t+"Label"]=n("<div><\/div>").text(i.options[t+"ListLabel"]).addClass(i.options.listLabelClass).addClass(i.options[t+"ListLabelClass"]).append(n("<span><\/span>").toggle(i.options.showCounters)),i[t+"List"]=n("<ul><\/ul>").addClass(i.options.listClass).addClass(i.options[t+"ListClass"]).delegate("li","click",{pickList:i},i._changeHandler).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"}).each(function(){this.onselectstart=function(){return!1}}),n("<div><\/div>").append(i[t+"Label"]).append(i[t+"List"]).appendTo(r),u=n("<div><\/div>",{"class":i.options.filterContainerClass,css:{display:"none"}}).addClass(i.options[t+"FilterClass"]).append(n('<input type="text">')).insertAfter(i[t+"Label"]),i.options.enableFilters&&u.find('input[type="text"]').on("keyup",n.proxy(i._filterHandler,i)).end().show(),r},_buildControls:function(){var t=this;return t.controls=n("<div><\/div>").addClass(t.options.controlsContainerClass),t.addAllButton=n('<button class="btn"><\/button>').on("click",n.proxy(t._addAllHandler,t)).html(t.options.addAllLabel).addClass(t.options.addAllClass),t.addButton=n('<button class="btn"><\/button>').on("click",n.proxy(t._addHandler,t)).html(t.options.addLabel).addClass(t.options.addClass),t.removeButton=n('<button class="btn"><\/button>').on("click",n.proxy(t._removeHandler,t)).html(t.options.removeLabel).addClass(t.options.removeClass),t.removeAllButton=n('<button class="btn"><\/button>').on("click",n.proxy(t._removeAllHandler,t)).html(t.options.removeAllLabel).addClass(t.options.removeAllClass),t.controls.append(t.addAllButton).append(t.addButton).append(t.removeButton).append(t.removeAllButton),t.controls},_populateLists:function(){var t=this,i=t.element[0].selectedIndex<0,r=t._generateRandomId();t.element.children().each(function(){var u=n(this),o=u.text(),f=r+"_"+n(this).index(),e=n("<li><\/li>").text(o).attr("id",f).addClass(t.options.listItemClass);t._itemDictionary[f]=u,i||!u.is(":selected")?t.sourceList.append(e):t.targetList.append(e)}),t.options.sortList&&(t._sortItems(t.sourceList),t._sortItems(t.targetList))},_addItem:function(t){var i=this;t.each(function(t,r){i.targetList.append(i._removeSelection(n(r)));var u=n(r).attr("id");i._itemDictionary[u].attr("selected",!0)}),i.options.sortList&&(i._sortItems(i.sourceList),i._sortItems(i.targetList))},_removeItem:function(t){var i=this;t.each(function(t,r){i.sourceList.append(i._removeSelection(n(r)));var u=n(r).attr("id");i._itemDictionary[u].removeAttr("selected")}),i.options.sortList&&(i._sortItems(i.sourceList),i._sortItems(i.targetList))},_filterHandler:function(t){if(this.options.enableFilters){var r=this,i=n(t.target),u=i.val().toString().toLowerCase();i.parent().next().children("li").show().filter(function(){var t=n(this).text().toString().toLowerCase();return t.indexOf(u)==-1}).each(function(t,i){r._removeSelection(n(i)).hide()}),this._refresh()}},_addAllHandler:function(n){this._addItem(this.sourceList.children(":visible")),this._refresh(),n.preventDefault()},_addHandler:function(n){this._addItem(this.sourceList.children(".pickList_selected:visible")),this._refresh(),n.preventDefault()},_removeHandler:function(n){this._removeItem(this.targetList.children(".pickList_selected:visible")),this._refresh(),n.preventDefault()},_removeAllHandler:function(n){this._removeItem(this.targetList.children(":visible")),this._refresh(),n.preventDefault()},_refresh:function(){var t=this;t.sourceList.children("li:visible").length?t.addAllButton.removeAttr("disabled"):t.addAllButton.attr("disabled",!0),t.targetList.children("li:visible").length?t.removeAllButton.removeAttr("disabled"):t.removeAllButton.attr("disabled",!0),t.sourceList.children(".pickList_selected:visible").length?t.addButton.removeAttr("disabled"):t.addButton.attr("disabled",!0),t.targetList.children(".pickList_selected:visible").length?t.removeButton.removeAttr("disabled"):t.removeButton.attr("disabled",!0),t.options.showCounters&&n.each(["source","target"],function(i,r){var u=t[r+"List"].children("li");n("span",t[r+"Label"]).text(t._formatString(" - showing {0} of {1}",u.filter(":visible").length,u.length))})},_sortItems:function(t){var i=t.children("li");i.sort(function(t,i){return n(t).text().toLowerCase().localeCompare(n(i).text().toLowerCase())}),n.each(i,function(n,i){t.append(i)})},_changeHandler:function(t){var i=t.data.pickList,r,u,o,f,e;t.ctrlKey?i._isSelected(n(this))?i._removeSelection(n(this)):(i.lastSelectedItem=n(this),i._addSelection(n(this))):t.shiftKey?(r=n(this).get(0),u=i.lastSelectedItem.get(0),n(this).index()<n(i.lastSelectedItem).index()&&(o=r,r=u,u=o),f=!1,e=!0,i._clearSelections(n(this).parent()),n(this).parent().children(":visible").each(function(){n(this).get(0)==u&&(f=!0),f&&e&&i._addSelection(n(this)),n(this).get(0)==r&&(e=!1)})):(i.lastSelectedItem=n(this),i._clearSelections(n(this).parent()),i._addSelection(n(this))),i._refresh()},_isSelected:function(n){return n.hasClass("pickList_selected")},_addSelection:function(n){var t=this;return n.addClass("pickList_selected").addClass(t.options.selectedListItemClass)},_removeSelection:function(n){var t=this;return n.removeClass("pickList_selected").removeClass(t.options.selectedListItemClass)},_clearSelections:function(t){var i=this;t.children().each(function(){i._removeSelection(n(this))})},_generateRandomId:function(){for(var t=(new Date).getTime().toString(32),n=0;n<5;n++)t+=Math.floor(Math.random()*65535).toString(32);return this.options.guidPrefix+t+(f++).toString(32)},_formatString:function(n){var t=[].splice.call(arguments,1);return n.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n})},option:function(t,i){if(arguments.length===0)return n.extend({},this.options);if(typeof t=="string"){if(i===r)return this.options[t];this.options[t]=i}return this},destroy:function(){var t=this;t._pickList.remove(),n.removeData(t.element.context,"pickList"),t.element.show()}},n.fn.picklist=function(t){var f=typeof t=="string",e=Array.prototype.slice.call(arguments,1),i=this;return f&&t.charAt(0)==="_"?i:(f?this.each(function(){var u=n.data(this,"pickList"),f=u&&n.isFunction(u[t])?u[t].apply(u,e):u;if(f!==u&&f!==r)return i=f,!1}):this.each(function(){var i=n.data(this,"pickList");i||n.data(this,"pickList",new u(this,t))}),i)},n(function(){n('[data-provide="picklist"]').each(function(){var t=n(this);t.picklist(t.data())})})})(jQuery,window,document);
//@ sourceMappingURL=picklist.min.js.map