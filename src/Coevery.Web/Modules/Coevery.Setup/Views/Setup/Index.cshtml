@model Coevery.Setup.ViewModels.SetupViewModel
@{
	Script.Include("jquery-1.9.1.min.js");
	Script.Include("base.js");
    Script.Include("setup.js");
}
<h1>@Html.TitleForPage(T("Get Started").ToString())</h1>

@using (Html.BeginFormAntiForgeryPost()) {
<h2>@T("Please answer a few questions to configure your site.")</h2>
<fieldset class="site">
    <div>
        <label for="SiteName">@T("What is the name of your site?")</label>
        @Html.TextBoxFor(svm => svm.SiteName, new { autofocus = "autofocus" })
    </div>
    <div>
        <label for="AdminUsername">@T("Choose a user name:")</label>
        @Html.EditorFor(svm => svm.AdminUsername)
    </div>
    <div>
        <label for="AdminPassword">@T("Choose a password:")</label>
        @Html.PasswordFor(svm => svm.AdminPassword, new { @class = "text single-line" })
    </div>
    <div>
        <label for="ConfirmAdminPassword">@T("Confirm the password:")</label>
        @Html.PasswordFor(svm => svm.ConfirmPassword, new { @class = "text single-line" })
    </div>
</fieldset>
if (!Model.DatabaseIsPreconfigured) {
    <fieldset class="data">
        <legend>@T("How would you like to store your data?")</legend>
        @Html.ValidationMessage("DatabaseOptions", "Unable to setup data storage")
        <div>
            @Html.RadioButtonFor(svm => svm.DatabaseProvider, Coevery.Setup.Controllers.SetupDatabaseType.Builtin.ToString(), new { id = "builtin" })
            <label for="builtin" class="forcheckbox">@T("Use built-in data storage (SQL Server Compact)")</label>
        </div>
        <div>
            @Html.RadioButtonFor(svm => svm.DatabaseProvider, Coevery.Setup.Controllers.SetupDatabaseType.SqlServer.ToString(), new { id = "sqlserver" })
            <label for="sqlserver" class="forcheckbox">@T("Use an existing SQL Server, SQL Express database")</label>
        </div>
        <div>
            @Html.RadioButtonFor(svm => svm.DatabaseProvider, Coevery.Setup.Controllers.SetupDatabaseType.MySql.ToString(), new { id = "mysql" })
            <label for="mysql" class="forcheckbox">@T("Use an existing MySql database")</label>
        </div>
        <div data-controllerid="builtin" data-defaultstate="hidden">
            <div>
                <label for="DatabaseServerName">@T("Choose a server:")</label>
                @Html.EditorFor(svm => svm.DatabaseServerName)
            </div>
            <div>
                <label for="DatabaseName">@T("Choose a database:")</label>
                @Html.EditorFor(svm => svm.DatabaseName)
            </div>
            <div data-controllerid="sqlserver" id="serveranthentication">
                <label>@T("Server authentication")</label>
                <div>
                    @Html.RadioButtonFor(svm => svm.ServerAuthentication, Coevery.Setup.Controllers.DatabaseAuthenticationMode.Windows.ToString(), new { id = "windows" })
                    <label for="windows" class="forcheckbox">@T("Windows Authentication mode")</label>
                </div>
                <div>
                    @Html.RadioButtonFor(svm => svm.ServerAuthentication, Coevery.Setup.Controllers.DatabaseAuthenticationMode.UserNamePassword.ToString(), new { id = "usernamepassword" })
                    <label for="usernamepassword" class="forcheckbox">@T("User Name and Password")</label>
                </div>
                <div data-controllerid="usernamepassword">
                    <div>
                        <label for="DatabaseUserName">@T("Choose a user name:")</label>
                        @Html.EditorFor(svm => svm.DatabaseUserName)
                    </div>
                    <div>
                        <label for="DatabasePassword">@T("Choose a password:")</label>
                        @Html.PasswordFor(svm => svm.DatabasePassword, new { @class = "text single-line" })
                    </div>
                </div>
            </div>
            <div data-controllerid="mysql">
                <label for="DatabaseUserName">@T("Choose a user name:")</label>
                @Html.EditorFor(svm => svm.DatabaseUserName)
            </div>
            <div data-controllerid="mysql">
                <label for="DatabasePassword">@T("Choose a password:")</label>
                @Html.PasswordFor(svm => svm.DatabasePassword, new { @class = "text single-line" })
            </div>

            <br /><br />
            <label for="DatabaseTablePrefix">@T("Database Table Prefix")</label>
            @Html.EditorFor(svm => svm.DatabaseTablePrefix)
        </div>

    </fieldset>
    @Html.ValidationSummary()
}
<div id="throbber">
    <div class="curtain"></div>
    <div class="curtain-content">
        <div>
            <h1 id="setUpHeader">@T("Cooking Coevery Recipe ...")</h1>
            <p>
                <img src="@Href("../../content/synchronizing.gif")" alt="" />
            </p>
        </div>
    </div>
</div>
    
<fieldset>
    <button class="primaryAction setupButton" type="submit">@T("Finish Setup")</button>
</fieldset>
}
